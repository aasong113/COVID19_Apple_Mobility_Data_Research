---
title: "Team 2 File"
author: "Michael Egle, John Chandara, Jaydon Cobb, Anthony Song"
date: "4/22/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(lubridate)
library(ggpubr)
```


```{r}
case <- read_csv(url('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv'))

death <- read_csv(url('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv'))

rec <- read_csv(url('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv'))

mob <- read_csv('applemobilitytrends-2020-04-24.csv')

nyc <- read_csv('nyc_covid.csv') #from nyc.gov

counties <- read_csv(url('https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv'))
```

```{r}
mob <- mob %>%
  pivot_longer(`2020-01-13`:`2020-04-24`,
               names_to = "date",
               values_to = "percent_change")
```

```{r}
counties <- counties %>%
  mutate(date = ymd(date))

mob <- mob %>%
  mutate(date = ymd(date))
```

Break up the county data set into four datasets for our cities of interest
```{r}
nyc <- counties %>%
  filter(county == "New York City")

mia <- counties %>%
  filter(county == "Miami-Dade")

chi <- counties %>%
  filter(county == "Cook", state == "Illinois")

sf <- counties %>%
  filter(county == "San Francisco")
```

```{r}
nyc_travel <- mob %>%
  filter(region == "New York City")

mia_travel <- mob %>%
  filter(region == "Miami")

chi_travel <- mob %>%
  filter(region == "Chicago")

sf_travel <- mob %>%
  filter(region == "San Francisco - Bay Area")
```

```{r}
nyc_travel <- nyc_travel %>%
  filter(date > ymd("2020/2/29"))
```


```{r}
nyc_travel_viz <- nyc_travel %>%
  ggplot(aes(x = date, y = percent_change, group = transportation_type,
             color = transportation_type)) +
  geom_line() +
  geom_smooth() +
  theme(legend.position = "none")
```

```{r}
nyc_deaths_viz <- nyc %>%
  ggplot(aes(x = date, y = deaths)) +
  geom_histogram(stat = "identity")
```

```{r}
ggarrange(nyc_travel_viz, nyc_deaths_viz,
          nrow = 2)
```

